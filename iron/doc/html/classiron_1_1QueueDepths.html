<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>IRON: iron::QueueDepths Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">IRON
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classiron_1_1QueueDepths.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classiron_1_1QueueDepths-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">iron::QueueDepths Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The <a class="el" href="classiron_1_1QueueDepths.html" title="The QueueDepths class stores queue depth information for a set of bins. ">QueueDepths</a> class stores queue depth information for a set of bins.  
 <a href="classiron_1_1QueueDepths.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="queue__depths_8h_source.html">queue_depths.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aaaf0929b90010877c2815c02a5e04624"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiron_1_1QueueDepths.html#aaaf0929b90010877c2815c02a5e04624">QueueDepths</a> (<a class="el" href="classiron_1_1BinMap.html">BinMap</a> &amp;bin_map)</td></tr>
<tr class="memdesc:aaaf0929b90010877c2815c02a5e04624"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="#aaaf0929b90010877c2815c02a5e04624">More...</a><br /></td></tr>
<tr class="separator:aaaf0929b90010877c2815c02a5e04624"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60eea2a2a743582e2277852dc1c13a8e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a60eea2a2a743582e2277852dc1c13a8e"></a>
virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiron_1_1QueueDepths.html#a60eea2a2a743582e2277852dc1c13a8e">~QueueDepths</a> ()</td></tr>
<tr class="memdesc:a60eea2a2a743582e2277852dc1c13a8e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor. <br /></td></tr>
<tr class="separator:a60eea2a2a743582e2277852dc1c13a8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72b82f0bd211917650b6500d619b5c1d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiron_1_1QueueDepths.html#a72b82f0bd211917650b6500d619b5c1d">InitializeShmDirectAccess</a> (<a class="el" href="classiron_1_1SharedMemoryIF.html">SharedMemoryIF</a> *shared_memory)</td></tr>
<tr class="memdesc:a72b82f0bd211917650b6500d619b5c1d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configures local pointer into shared memory.  <a href="#a72b82f0bd211917650b6500d619b5c1d">More...</a><br /></td></tr>
<tr class="separator:a72b82f0bd211917650b6500d619b5c1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a819ab9df28487cd3f2a9ccc1150caddf"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiron_1_1QueueDepths.html#a819ab9df28487cd3f2a9ccc1150caddf">InitializeShmStats</a> ()</td></tr>
<tr class="memdesc:a819ab9df28487cd3f2a9ccc1150caddf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets up shared memory statistics object.  <a href="#a819ab9df28487cd3f2a9ccc1150caddf">More...</a><br /></td></tr>
<tr class="separator:a819ab9df28487cd3f2a9ccc1150caddf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4545335f6512b70da372ef9d0fe05e6e"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiron_1_1QueueDepths.html#a4545335f6512b70da372ef9d0fe05e6e">GetBinDepthByIdx</a> (<a class="el" href="namespaceiron.html#a9a5f420ded2cbb0ebfaf30509e0ce1d5">BinIndex</a> bin_idx, <a class="el" href="namespaceiron.html#a2603a9d5ad80707c1a0aa907c23833ad">LatencyClass</a> lat=NORMAL_LATENCY) const </td></tr>
<tr class="memdesc:a4545335f6512b70da372ef9d0fe05e6e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get depth of a bin, in bytes, for a given traffic type.  <a href="#a4545335f6512b70da372ef9d0fe05e6e">More...</a><br /></td></tr>
<tr class="separator:a4545335f6512b70da372ef9d0fe05e6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5f982224cfde74b88886bdb32244f93"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiron_1_1QueueDepths.html#ae5f982224cfde74b88886bdb32244f93">SetBinDepthByIdx</a> (<a class="el" href="namespaceiron.html#a9a5f420ded2cbb0ebfaf30509e0ce1d5">iron::BinIndex</a> bin_idx, uint32_t depth, uint32_t ls_depth)</td></tr>
<tr class="memdesc:ae5f982224cfde74b88886bdb32244f93"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the depth of a bin, in bytes.  <a href="#ae5f982224cfde74b88886bdb32244f93">More...</a><br /></td></tr>
<tr class="separator:ae5f982224cfde74b88886bdb32244f93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef468f0a1f6ebfdbae6b2f1580dcd7eb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiron_1_1QueueDepths.html#aef468f0a1f6ebfdbae6b2f1580dcd7eb">SetBinDepthByIdx</a> (<a class="el" href="namespaceiron.html#a9a5f420ded2cbb0ebfaf30509e0ce1d5">iron::BinIndex</a> bin_idx, uint32_t depth, <a class="el" href="namespaceiron.html#a2603a9d5ad80707c1a0aa907c23833ad">iron::LatencyClass</a> lat=NORMAL_LATENCY)</td></tr>
<tr class="memdesc:aef468f0a1f6ebfdbae6b2f1580dcd7eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the depth of a bin, in bytes.  <a href="#aef468f0a1f6ebfdbae6b2f1580dcd7eb">More...</a><br /></td></tr>
<tr class="separator:aef468f0a1f6ebfdbae6b2f1580dcd7eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d6363e7b712259e9616ab7f42a59ae4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiron_1_1QueueDepths.html#a6d6363e7b712259e9616ab7f42a59ae4">AdjustByAmt</a> (<a class="el" href="namespaceiron.html#a9a5f420ded2cbb0ebfaf30509e0ce1d5">BinIndex</a> bin_idx, int64_t amt_bytes, int64_t ls_amt_bytes=0)</td></tr>
<tr class="memdesc:a6d6363e7b712259e9616ab7f42a59ae4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Increase or decrease the size, in bytes, of a bin.  <a href="#a6d6363e7b712259e9616ab7f42a59ae4">More...</a><br /></td></tr>
<tr class="separator:a6d6363e7b712259e9616ab7f42a59ae4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af353a38f536627e76b2cce3bfec453cf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiron_1_1QueueDepths.html#af353a38f536627e76b2cce3bfec453cf">Increment</a> (<a class="el" href="namespaceiron.html#a9a5f420ded2cbb0ebfaf30509e0ce1d5">BinIndex</a> bin_idx, uint32_t incr_amt_bytes, uint32_t ls_incr_amt_bytes=0)</td></tr>
<tr class="memdesc:af353a38f536627e76b2cce3bfec453cf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Increase the size, in bytes, of a bin.  <a href="#af353a38f536627e76b2cce3bfec453cf">More...</a><br /></td></tr>
<tr class="separator:af353a38f536627e76b2cce3bfec453cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a7d5a70eab0c63d366cea9c408b8f66"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiron_1_1QueueDepths.html#a3a7d5a70eab0c63d366cea9c408b8f66">Decrement</a> (<a class="el" href="namespaceiron.html#a9a5f420ded2cbb0ebfaf30509e0ce1d5">BinIndex</a> bin_idx, uint32_t decr_amt_bytes, uint32_t ls_decr_amt_bytes=0)</td></tr>
<tr class="memdesc:a3a7d5a70eab0c63d366cea9c408b8f66"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decrease the size, in bytes, of a bin.  <a href="#a3a7d5a70eab0c63d366cea9c408b8f66">More...</a><br /></td></tr>
<tr class="separator:a3a7d5a70eab0c63d366cea9c408b8f66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00c7f1187fbcd3c98e66e52edd1c9f1e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiron_1_1QueueDepths.html#a00c7f1187fbcd3c98e66e52edd1c9f1e">ClearAllBins</a> ()</td></tr>
<tr class="memdesc:a00c7f1187fbcd3c98e66e52edd1c9f1e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear all the depths for all bins without removing any bin.  <a href="#a00c7f1187fbcd3c98e66e52edd1c9f1e">More...</a><br /></td></tr>
<tr class="separator:a00c7f1187fbcd3c98e66e52edd1c9f1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8fc7da47eb72183e78b89627fcc4e0f1"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiron_1_1QueueDepths.html#a8fc7da47eb72183e78b89627fcc4e0f1">GetNumQueues</a> () const </td></tr>
<tr class="memdesc:a8fc7da47eb72183e78b89627fcc4e0f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the number of bins configured in the system.  <a href="#a8fc7da47eb72183e78b89627fcc4e0f1">More...</a><br /></td></tr>
<tr class="separator:a8fc7da47eb72183e78b89627fcc4e0f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf2c51caab49a79cdd119aef7adf8643"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiron_1_1QueueDepths.html#adf2c51caab49a79cdd119aef7adf8643">GetNumNonZeroQueues</a> () const </td></tr>
<tr class="memdesc:adf2c51caab49a79cdd119aef7adf8643"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the number of non-zero destination bins currently in the QueueDepth object.  <a href="#adf2c51caab49a79cdd119aef7adf8643">More...</a><br /></td></tr>
<tr class="separator:adf2c51caab49a79cdd119aef7adf8643"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9329652717c102f49d5f1f982d9447aa"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiron_1_1QueueDepths.html#a9329652717c102f49d5f1f982d9447aa">Serialize</a> (uint8_t *ret, size_t max_len, uint8_t &amp;num_pairs)</td></tr>
<tr class="memdesc:a9329652717c102f49d5f1f982d9447aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Serialize the queue depths information into a buffer.  <a href="#a9329652717c102f49d5f1f982d9447aa">More...</a><br /></td></tr>
<tr class="separator:a9329652717c102f49d5f1f982d9447aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9da34a9f9c73a7069685cffb3943ef3"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiron_1_1QueueDepths.html#af9da34a9f9c73a7069685cffb3943ef3">Deserialize</a> (const uint8_t *depths, size_t len, uint8_t num_pairs)</td></tr>
<tr class="memdesc:af9da34a9f9c73a7069685cffb3943ef3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deserialize a buffer into a QueueDepth object.  <a href="#af9da34a9f9c73a7069685cffb3943ef3">More...</a><br /></td></tr>
<tr class="separator:af9da34a9f9c73a7069685cffb3943ef3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a050b38ccbc0ba12d914f65d9c37791"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiron_1_1QueueDepths.html#a7a050b38ccbc0ba12d914f65d9c37791">GetShmSize</a> () const </td></tr>
<tr class="memdesc:a7a050b38ccbc0ba12d914f65d9c37791"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the size needed to share queue depths.  <a href="#a7a050b38ccbc0ba12d914f65d9c37791">More...</a><br /></td></tr>
<tr class="separator:a7a050b38ccbc0ba12d914f65d9c37791"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1eff84678122dcbd9c80d0d1c6f1ade7"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiron_1_1QueueDepths.html#a1eff84678122dcbd9c80d0d1c6f1ade7">CopyToShm</a> (<a class="el" href="classiron_1_1SharedMemoryIF.html">SharedMemoryIF</a> &amp;shared_memory)</td></tr>
<tr class="memdesc:a1eff84678122dcbd9c80d0d1c6f1ade7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Store the queue depth array into shared memory.  <a href="#a1eff84678122dcbd9c80d0d1c6f1ade7">More...</a><br /></td></tr>
<tr class="separator:a1eff84678122dcbd9c80d0d1c6f1ade7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ce8260f35f4ab3fb0ea2d132bdfdd7f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiron_1_1QueueDepths.html#a9ce8260f35f4ab3fb0ea2d132bdfdd7f">CopyFromShm</a> (<a class="el" href="classiron_1_1SharedMemoryIF.html">SharedMemoryIF</a> &amp;shared_memory)</td></tr>
<tr class="memdesc:a9ce8260f35f4ab3fb0ea2d132bdfdd7f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fetch the queue depth array from shared memory.  <a href="#a9ce8260f35f4ab3fb0ea2d132bdfdd7f">More...</a><br /></td></tr>
<tr class="separator:a9ce8260f35f4ab3fb0ea2d132bdfdd7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a015d6a3682b1ff89a77cf588270a218b"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiron_1_1QueueDepths.html#a015d6a3682b1ff89a77cf588270a218b">StatDump</a> () const </td></tr>
<tr class="memdesc:a015d6a3682b1ff89a77cf588270a218b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print the queue depths for the stat dump.  <a href="#a015d6a3682b1ff89a77cf588270a218b">More...</a><br /></td></tr>
<tr class="separator:a015d6a3682b1ff89a77cf588270a218b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6451ebfeb6c5dafa5a1ec9a748fa7248"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiron_1_1QueueDepths.html#a6451ebfeb6c5dafa5a1ec9a748fa7248">ToString</a> () const </td></tr>
<tr class="memdesc:a6451ebfeb6c5dafa5a1ec9a748fa7248"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert the QueueDepth object into a string.  <a href="#a6451ebfeb6c5dafa5a1ec9a748fa7248">More...</a><br /></td></tr>
<tr class="separator:a6451ebfeb6c5dafa5a1ec9a748fa7248"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a642cc21e0d37e1e6bbfe5242c29fe04b"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiron_1_1QueueDepths.html#a642cc21e0d37e1e6bbfe5242c29fe04b">ToQdDict</a> () const </td></tr>
<tr class="memdesc:a642cc21e0d37e1e6bbfe5242c29fe04b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate a python dictionary of bin id: queue depths pair.  <a href="#a642cc21e0d37e1e6bbfe5242c29fe04b">More...</a><br /></td></tr>
<tr class="separator:a642cc21e0d37e1e6bbfe5242c29fe04b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The <a class="el" href="classiron_1_1QueueDepths.html" title="The QueueDepths class stores queue depth information for a set of bins. ">QueueDepths</a> class stores queue depth information for a set of bins. </p>
<p>Each <a class="el" href="classiron_1_1QueueDepths.html" title="The QueueDepths class stores queue depth information for a set of bins. ">QueueDepths</a> object contains information for some number of bins. Bins are locally indexed by unique unsigned integer values (BinIndex). The information stored for each bin is the current queue depth, in bytes, for the actual packet queue for the bin, which is stored elsewhere. <a class="el" href="classiron_1_1QueueDepths.html" title="The QueueDepths class stores queue depth information for a set of bins. ">QueueDepths</a> objects may be serialized to be sent over a network connection, and may be deserialized back into an object at the receiving end. Most functions (as well as serialization) index the queue depths by BinId, which is a universally understood identifier that can be translated internally to the BinIndex using the <a class="el" href="classiron_1_1BinMap.html" title="Mapping of identifiers to IRON nodes and multicast groups. ">BinMap</a>. </p>

<p>Definition at line <a class="el" href="queue__depths_8h_source.html#l00076">76</a> of file <a class="el" href="queue__depths_8h_source.html">queue_depths.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="aaaf0929b90010877c2815c02a5e04624"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QueueDepths::QueueDepths </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classiron_1_1BinMap.html">BinMap</a> &amp;&#160;</td>
          <td class="paramname"><em>bin_map</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bin_map</td><td>Mapping of IRON bins. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="queue__depths_8cc_source.html#l00064">64</a> of file <a class="el" href="queue__depths_8cc_source.html">queue_depths.cc</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a6d6363e7b712259e9616ab7f42a59ae4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void QueueDepths::AdjustByAmt </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceiron.html#a9a5f420ded2cbb0ebfaf30509e0ce1d5">BinIndex</a>&#160;</td>
          <td class="paramname"><em>bin_idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>amt_bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>ls_amt_bytes</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Increase or decrease the size, in bytes, of a bin. </p>
<p>This is a shortcut for calling Increment or Decrement.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bin_idx</td><td>The bin index of the bin depth to be adjusted. May be a unicast or multicast destination bin index. </td></tr>
    <tr><td class="paramname">amt_bytes</td><td>Number of bytes by which to increment or decrement the normal latency depth. Negative to decrement. </td></tr>
    <tr><td class="paramname">ls_amt_bytes</td><td>Number of bytes by which to increment or decrement the latency-sensitive depth. Negative to decrement. Note that |ls_incr_amt_bytes| &lt;= |incr_amt_bytes| (and both must be positive or both negative). </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="queue__depths_8cc_source.html#l00242">242</a> of file <a class="el" href="queue__depths_8cc_source.html">queue_depths.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a00c7f1187fbcd3c98e66e52edd1c9f1e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void QueueDepths::ClearAllBins </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clear all the depths for all bins without removing any bin. </p>
<p>The depths are all set to 0. </p>

<p>Definition at line <a class="el" href="queue__depths_8cc_source.html#l00365">365</a> of file <a class="el" href="queue__depths_8cc_source.html">queue_depths.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a9ce8260f35f4ab3fb0ea2d132bdfdd7f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool QueueDepths::CopyFromShm </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classiron_1_1SharedMemoryIF.html">SharedMemoryIF</a> &amp;&#160;</td>
          <td class="paramname"><em>shared_memory</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fetch the queue depth array from shared memory. </p>
<p>This includes all necessary locking, unlocking, and waiting (if the shared memory segment is in use). It copies the entire array of queue depths, overwriting whatever in the local array.</p>
<p>This MUST NOT be called if shared memory direct access is in use (i.e., if InitializeShmDirectAccess has been called).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">shared_memory</td><td>A reference to the shared memory source.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if the copy succeeded, false if it failed. </dd></dl>

<p>Definition at line <a class="el" href="queue__depths_8cc_source.html#l00631">631</a> of file <a class="el" href="queue__depths_8cc_source.html">queue_depths.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a1eff84678122dcbd9c80d0d1c6f1ade7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool QueueDepths::CopyToShm </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classiron_1_1SharedMemoryIF.html">SharedMemoryIF</a> &amp;&#160;</td>
          <td class="paramname"><em>shared_memory</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Store the queue depth array into shared memory. </p>
<p>This includes all necessary locking, unlocking, and waiting (if the shared memory segment is in use). It copies just the array of queue depths (and it copies the entire array, including values that have not changed as well as values that have).</p>
<p>This MUST NOT be called if shared memory direct access is in use (i.e., if InitializeShmDirectAccess has been called).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">shared_memory</td><td>A reference to the shared memory destination.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if the copy succeeded, false if it failed. </dd></dl>

<p>Definition at line <a class="el" href="queue__depths_8cc_source.html#l00601">601</a> of file <a class="el" href="queue__depths_8cc_source.html">queue_depths.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a3a7d5a70eab0c63d366cea9c408b8f66"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void QueueDepths::Decrement </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceiron.html#a9a5f420ded2cbb0ebfaf30509e0ce1d5">BinIndex</a>&#160;</td>
          <td class="paramname"><em>bin_idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>decr_amt_bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ls_decr_amt_bytes</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Decrease the size, in bytes, of a bin. </p>
<p>This will be updated as packets are dequeued.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bin_idx</td><td>The bin index of the bin to be decremented. May be a unicast or multicast destination bin index. </td></tr>
    <tr><td class="paramname">decr_amt_bytes</td><td>Number of bytes by which to decrement the normal latency depth. </td></tr>
    <tr><td class="paramname">ls_decr_amt_bytes</td><td>Number of bytes by which to decrement the latency-sensitive depth. Note that ls_decr_amt_bytes &lt;= decr_amt_bytes. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="queue__depths_8cc_source.html#l00308">308</a> of file <a class="el" href="queue__depths_8cc_source.html">queue_depths.cc</a>.</p>

</div>
</div>
<a class="anchor" id="af9da34a9f9c73a7069685cffb3943ef3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t QueueDepths::Deserialize </td>
          <td>(</td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>depths</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>num_pairs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deserialize a buffer into a QueueDepth object. </p>
<p>The bytes are converted to host byte order upon successful deserialization. The QueueDepth object is overwritten with the deserialized information only if a non-zero value is returned.</p>
<p>Both the <a class="el" href="classiron_1_1QueueDepths.html#a9329652717c102f49d5f1f982d9447aa" title="Serialize the queue depths information into a buffer. ">Serialize()</a> and <a class="el" href="classiron_1_1QueueDepths.html#af9da34a9f9c73a7069685cffb3943ef3" title="Deserialize a buffer into a QueueDepth object. ">Deserialize()</a> methods share a single, internal sequence number. For this reason, each QueueDepth object should only use either <a class="el" href="classiron_1_1QueueDepths.html#a9329652717c102f49d5f1f982d9447aa" title="Serialize the queue depths information into a buffer. ">Serialize()</a> or <a class="el" href="classiron_1_1QueueDepths.html#af9da34a9f9c73a7069685cffb3943ef3" title="Deserialize a buffer into a QueueDepth object. ">Deserialize()</a> calls.</p>
<p>See the documentation for <a class="el" href="classiron_1_1QueueDepths.html#a9329652717c102f49d5f1f982d9447aa" title="Serialize the queue depths information into a buffer. ">Serialize()</a> for details on the serialization format used.</p>
<p>This MUST NOT be called if shared memory direct access is in use (i.e., if InitializeShmDirectAccess has been called). This decision was made because serialization/deserialization would require that the shared memory structure be locked for too long.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">depths</td><td>A pointer to the buffer containing the serialized data. </td></tr>
    <tr><td class="paramname">len</td><td>The length of the serialized data in bytes. </td></tr>
    <tr><td class="paramname">num_pairs</td><td>The number of (dest_bin, byte count) pairs to deserialize.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns the number of bytes deserialized. 0 for error. </dd></dl>

<p>Definition at line <a class="el" href="queue__depths_8cc_source.html#l00494">494</a> of file <a class="el" href="queue__depths_8cc_source.html">queue_depths.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a4545335f6512b70da372ef9d0fe05e6e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t QueueDepths::GetBinDepthByIdx </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceiron.html#a9a5f420ded2cbb0ebfaf30509e0ce1d5">BinIndex</a>&#160;</td>
          <td class="paramname"><em>bin_idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaceiron.html#a2603a9d5ad80707c1a0aa907c23833ad">LatencyClass</a>&#160;</td>
          <td class="paramname"><em>lat</em> = <code>NORMAL_LATENCY</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get depth of a bin, in bytes, for a given traffic type. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bin_idx</td><td>The bin index to query. May be a unicast or multicast destination bin index. </td></tr>
    <tr><td class="paramname">lat</td><td>The traffic type (latency-sensitive or insensitive) for which to get the bin depth (NORMAL by default).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The depth of the bin, in bytes. If the bin index is invalid, then an error is logged and an unknown value is returned. </dd></dl>

<p>Definition at line <a class="el" href="queue__depths_8cc_source.html#l00188">188</a> of file <a class="el" href="queue__depths_8cc_source.html">queue_depths.cc</a>.</p>

</div>
</div>
<a class="anchor" id="adf2c51caab49a79cdd119aef7adf8643"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t QueueDepths::GetNumNonZeroQueues </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the number of non-zero destination bins currently in the QueueDepth object. </p>
<p>The number returned only includes destination bins with non-zero-length queues. Note that this excludes multicast group queues, since these aren't used for anything except the "own group" convenience count which double counts bytes already counted per destination.</p>
<p>Note: This counts the bins every time it is called. It is really only to be used for testing.</p>
<dl class="section return"><dt>Returns</dt><dd>The number of bins with non-zero queue lengths. </dd></dl>

<p>Definition at line <a class="el" href="queue__depths_8cc_source.html#l00383">383</a> of file <a class="el" href="queue__depths_8cc_source.html">queue_depths.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a8fc7da47eb72183e78b89627fcc4e0f1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t iron::QueueDepths::GetNumQueues </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the number of bins configured in the system. </p>
<p>The number returned will include any bins with any queue length, even zero-length queues.</p>
<dl class="section return"><dt>Returns</dt><dd>The total number of bins. </dd></dl>

<p>Definition at line <a class="el" href="queue__depths_8h_source.html#l00215">215</a> of file <a class="el" href="queue__depths_8h_source.html">queue_depths.h</a>.</p>

</div>
</div>
<a class="anchor" id="a7a050b38ccbc0ba12d914f65d9c37791"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t iron::QueueDepths::GetShmSize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return the size needed to share queue depths. </p>
<dl class="section return"><dt>Returns</dt><dd>The number of bytes needed in shared memory. </dd></dl>

<p>Definition at line <a class="el" href="queue__depths_8h_source.html#l00296">296</a> of file <a class="el" href="queue__depths_8h_source.html">queue_depths.h</a>.</p>

</div>
</div>
<a class="anchor" id="af353a38f536627e76b2cce3bfec453cf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void QueueDepths::Increment </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceiron.html#a9a5f420ded2cbb0ebfaf30509e0ce1d5">BinIndex</a>&#160;</td>
          <td class="paramname"><em>bin_idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>incr_amt_bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ls_incr_amt_bytes</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Increase the size, in bytes, of a bin. </p>
<p>This will be updated as packets are enqueued.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bin_idx</td><td>The bin index of the bin to be incremented. May be a unicast or multicast destination bin index. </td></tr>
    <tr><td class="paramname">incr_amt_bytes</td><td>Number of bytes by which to increment the normal latency depth. </td></tr>
    <tr><td class="paramname">ls_incr_amt_bytes</td><td>Number of bytes by which to increment the latency-sensitive depth. Note that ls_incr_amt_bytes &lt;= incr_amt_bytes. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="queue__depths_8cc_source.html#l00256">256</a> of file <a class="el" href="queue__depths_8cc_source.html">queue_depths.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a72b82f0bd211917650b6500d619b5c1d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool QueueDepths::InitializeShmDirectAccess </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classiron_1_1SharedMemoryIF.html">SharedMemoryIF</a> *&#160;</td>
          <td class="paramname"><em>shared_memory</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configures local pointer into shared memory. </p>
<p>Calling this function configures this <a class="el" href="classiron_1_1QueueDepths.html" title="The QueueDepths class stores queue depth information for a set of bins. ">QueueDepths</a> instance to use direct shared memory access instead of using a copy of the data in local memory. Once this has been called, the internal depths array will no longer be used. Instead, the queue depths pointer will be set up to point into shared memory, so that all accesses to queue depth information will use the shared memory version directly.</p>
<dl class="section return"><dt>Returns</dt><dd>True if initialization is successful. (Note: this currently always returns true or blocks forever if we cannot attach to the shared memory.) </dd></dl>

<p>Definition at line <a class="el" href="queue__depths_8cc_source.html#l00118">118</a> of file <a class="el" href="queue__depths_8cc_source.html">queue_depths.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a819ab9df28487cd3f2a9ccc1150caddf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool QueueDepths::InitializeShmStats </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets up shared memory statistics object. </p>
<p>To be called if and only if this set of queue depths will be written to shared memory. Sets up the statistics object to track how stale the values get over time.</p>
<p>Note: This does nothing unless SHM_STATS is defined in the common makefile.</p>
<dl class="section return"><dt>Returns</dt><dd>True if initialization is successful. </dd></dl>

<p>Definition at line <a class="el" href="queue__depths_8cc_source.html#l00169">169</a> of file <a class="el" href="queue__depths_8cc_source.html">queue_depths.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a9329652717c102f49d5f1f982d9447aa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t QueueDepths::Serialize </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>ret</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>max_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t &amp;&#160;</td>
          <td class="paramname"><em>num_pairs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Serialize the queue depths information into a buffer. </p>
<p>Note that this method currently supresses zero-length bins.</p>
<p>Used for adding all of the destination bin identifiers, normal queue depths, and latency-sensitive queue depths for a single group to a QLAM packet. The destination bin identifier takes up 1 byte in the buffer, and each queue depth takes up 4 bytes in the buffer (in network byte order).</p>
<p>Both the <a class="el" href="classiron_1_1QueueDepths.html#a9329652717c102f49d5f1f982d9447aa" title="Serialize the queue depths information into a buffer. ">Serialize()</a> and <a class="el" href="classiron_1_1QueueDepths.html#af9da34a9f9c73a7069685cffb3943ef3" title="Deserialize a buffer into a QueueDepth object. ">Deserialize()</a> methods share a single, internal sequence number. For this reason, each QueueDepth object should only use either <a class="el" href="classiron_1_1QueueDepths.html#a9329652717c102f49d5f1f982d9447aa" title="Serialize the queue depths information into a buffer. ">Serialize()</a> or <a class="el" href="classiron_1_1QueueDepths.html#af9da34a9f9c73a7069685cffb3943ef3" title="Deserialize a buffer into a QueueDepth object. ">Deserialize()</a> calls.</p>
<p>This MUST NOT be called if shared memory direct access is in use (i.e., if InitializeShmDirectAccess has been called). This decision was made because serialization/deserialization would require that the shared memory structure be locked for too long.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ret</td><td>A pointer to the buffer where the resulting serialized data will be written. </td></tr>
    <tr><td class="paramname">max_len</td><td>The maximum length, in bytes, that can be written to this buffer. </td></tr>
    <tr><td class="paramname">num_pairs</td><td>The number of pairs written, to be returned.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of bytes written to the buffer. If zero is returned, then the serialization has failed. </dd></dl>

<p>Definition at line <a class="el" href="queue__depths_8cc_source.html#l00410">410</a> of file <a class="el" href="queue__depths_8cc_source.html">queue_depths.cc</a>.</p>

</div>
</div>
<a class="anchor" id="ae5f982224cfde74b88886bdb32244f93"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void iron::QueueDepths::SetBinDepthByIdx </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceiron.html#a9a5f420ded2cbb0ebfaf30509e0ce1d5">iron::BinIndex</a>&#160;</td>
          <td class="paramname"><em>bin_idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>depth</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ls_depth</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set the depth of a bin, in bytes. </p>
<p>WARNING: If direct shared memory access is being used, then the LS depth will clobber the normal depth!!</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bin_idx</td><td>The bin index of the bin depth to be set. May be a unicast or multicast destination bin index. </td></tr>
    <tr><td class="paramname">depth</td><td>The value of depth, in bytes, to be assigned to the bin. </td></tr>
    <tr><td class="paramname">ls_depth</td><td>The value of depth, in bytes, to be assigned to the bin for latency-sensitive traffic. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="queue__depths_8h_source.html#l00138">138</a> of file <a class="el" href="queue__depths_8h_source.html">queue_depths.h</a>.</p>

</div>
</div>
<a class="anchor" id="aef468f0a1f6ebfdbae6b2f1580dcd7eb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iron::QueueDepths::SetBinDepthByIdx </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceiron.html#a9a5f420ded2cbb0ebfaf30509e0ce1d5">iron::BinIndex</a>&#160;</td>
          <td class="paramname"><em>bin_idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>depth</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaceiron.html#a2603a9d5ad80707c1a0aa907c23833ad">iron::LatencyClass</a>&#160;</td>
          <td class="paramname"><em>lat</em> = <code>NORMAL_LATENCY</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the depth of a bin, in bytes. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bin_idx</td><td>The bin index of the bin depth to be set. May be a unicast or multicast destination bin index. </td></tr>
    <tr><td class="paramname">depth</td><td>The value of depth, in bytes, to be assigned to the bin. </td></tr>
    <tr><td class="paramname">lat</td><td>The traffic type (latency-sensitive or insensitive) for which to set the bin depth (NORMAL by default). </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="queue__depths_8cc_source.html#l00211">211</a> of file <a class="el" href="queue__depths_8cc_source.html">queue_depths.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a015d6a3682b1ff89a77cf588270a218b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">string QueueDepths::StatDump </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Print the queue depths for the stat dump. </p>
<dl class="section return"><dt>Returns</dt><dd>A string object with the bin_id:queue-depth pairs without the leading legend, contrary to ToString. </dd></dl>

<p>Definition at line <a class="el" href="queue__depths_8cc_source.html#l00654">654</a> of file <a class="el" href="queue__depths_8cc_source.html">queue_depths.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a642cc21e0d37e1e6bbfe5242c29fe04b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">string QueueDepths::ToQdDict </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generate a python dictionary of bin id: queue depths pair. </p>
<dl class="section return"><dt>Returns</dt><dd>A string representation of a python dictionary. </dd></dl>

<p>Definition at line <a class="el" href="queue__depths_8cc_source.html#l00728">728</a> of file <a class="el" href="queue__depths_8cc_source.html">queue_depths.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a6451ebfeb6c5dafa5a1ec9a748fa7248"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">string QueueDepths::ToString </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert the QueueDepth object into a string. </p>
<p>Returns a string representation the bin-id:queue-depth pair for all pairs in the queue depth object.</p>
<dl class="section return"><dt>Returns</dt><dd>A string object with the bin-id:queue-depth pairs of the queue_depth object. </dd></dl>

<p>Definition at line <a class="el" href="queue__depths_8cc_source.html#l00688">688</a> of file <a class="el" href="queue__depths_8cc_source.html">queue_depths.cc</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/szabele/github/IRON/iron/common/include/<a class="el" href="queue__depths_8h_source.html">queue_depths.h</a></li>
<li>/home/szabele/github/IRON/iron/common/src/<a class="el" href="queue__depths_8cc_source.html">queue_depths.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceiron.html">iron</a></li><li class="navelem"><a class="el" href="classiron_1_1QueueDepths.html">QueueDepths</a></li>
    <li class="footer">Generated on Fri Feb 26 2021 11:31:59 for IRON by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
