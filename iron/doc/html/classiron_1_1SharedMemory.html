<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>IRON: iron::SharedMemory Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">IRON
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classiron_1_1SharedMemory.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classiron_1_1SharedMemory-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">iron::SharedMemory Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A class for inter-process shared memory.  
 <a href="classiron_1_1SharedMemory.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="shared__memory_8h_source.html">shared_memory.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for iron::SharedMemory:</div>
<div class="dyncontent">
<div class="center"><img src="classiron_1_1SharedMemory__inherit__graph.png" border="0" usemap="#iron_1_1SharedMemory_inherit__map" alt="Inheritance graph"/></div>
<map name="iron_1_1SharedMemory_inherit__map" id="iron_1_1SharedMemory_inherit__map">
<area shape="rect" id="node2" href="classiron_1_1SharedMemoryIF.html" title="An abstract shared memory interface. " alt="" coords="5,5,156,32"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for iron::SharedMemory:</div>
<div class="dyncontent">
<div class="center"><img src="classiron_1_1SharedMemory__coll__graph.png" border="0" usemap="#iron_1_1SharedMemory_coll__map" alt="Collaboration graph"/></div>
<map name="iron_1_1SharedMemory_coll__map" id="iron_1_1SharedMemory_coll__map">
<area shape="rect" id="node2" href="classiron_1_1SharedMemoryIF.html" title="An abstract shared memory interface. " alt="" coords="5,5,156,32"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ad4cee9385b663fa8bc396e934ca9b50e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad4cee9385b663fa8bc396e934ca9b50e"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiron_1_1SharedMemory.html#ad4cee9385b663fa8bc396e934ca9b50e">SharedMemory</a> ()</td></tr>
<tr class="memdesc:ad4cee9385b663fa8bc396e934ca9b50e"><td class="mdescLeft">&#160;</td><td class="mdescRight">The default constructor. <br /></td></tr>
<tr class="separator:ad4cee9385b663fa8bc396e934ca9b50e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc56751ce1b30224689e71cd3b6c09be"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="adc56751ce1b30224689e71cd3b6c09be"></a>
virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiron_1_1SharedMemory.html#adc56751ce1b30224689e71cd3b6c09be">~SharedMemory</a> ()</td></tr>
<tr class="memdesc:adc56751ce1b30224689e71cd3b6c09be"><td class="mdescLeft">&#160;</td><td class="mdescRight">The destructor. <br /></td></tr>
<tr class="separator:adc56751ce1b30224689e71cd3b6c09be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0f7c967737b106707b4c281d6a67f75"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiron_1_1SharedMemory.html#aa0f7c967737b106707b4c281d6a67f75">Create</a> (key_t key, const char *name, size_t size_bytes)</td></tr>
<tr class="memdesc:aa0f7c967737b106707b4c281d6a67f75"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create the shared memory segment.  <a href="#aa0f7c967737b106707b4c281d6a67f75">More...</a><br /></td></tr>
<tr class="separator:aa0f7c967737b106707b4c281d6a67f75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1326a7c31d5216a887ad96d89634e538"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiron_1_1SharedMemory.html#a1326a7c31d5216a887ad96d89634e538">Attach</a> (key_t key, const char *name, size_t size_bytes)</td></tr>
<tr class="memdesc:a1326a7c31d5216a887ad96d89634e538"><td class="mdescLeft">&#160;</td><td class="mdescRight">Access the shared memory segment.  <a href="#a1326a7c31d5216a887ad96d89634e538">More...</a><br /></td></tr>
<tr class="separator:a1326a7c31d5216a887ad96d89634e538"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e115f469391a7292f56fbfef464fa71"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiron_1_1SharedMemory.html#a9e115f469391a7292f56fbfef464fa71">CopyToShm</a> (const uint8_t *src_buf, size_t size_bytes, size_t shm_offset_bytes=0)</td></tr>
<tr class="memdesc:a9e115f469391a7292f56fbfef464fa71"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy data into the shared memory segment.  <a href="#a9e115f469391a7292f56fbfef464fa71">More...</a><br /></td></tr>
<tr class="separator:a9e115f469391a7292f56fbfef464fa71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5cc6e43a3cd831148a7387876e6233f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiron_1_1SharedMemory.html#ab5cc6e43a3cd831148a7387876e6233f">CopyFromShm</a> (uint8_t *dst_buf, size_t size_bytes, size_t shm_offset_bytes=0)</td></tr>
<tr class="memdesc:ab5cc6e43a3cd831148a7387876e6233f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy data out of the shared memory segment.  <a href="#ab5cc6e43a3cd831148a7387876e6233f">More...</a><br /></td></tr>
<tr class="separator:ab5cc6e43a3cd831148a7387876e6233f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82e917b65dd84643f389d388cd9d2852"><td class="memItemLeft" align="right" valign="top">uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiron_1_1SharedMemory.html#a82e917b65dd84643f389d388cd9d2852">GetShmPtr</a> (size_t shm_offset_bytes=0)</td></tr>
<tr class="memdesc:a82e917b65dd84643f389d388cd9d2852"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve a pointer into the shared memory segment.  <a href="#a82e917b65dd84643f389d388cd9d2852">More...</a><br /></td></tr>
<tr class="separator:a82e917b65dd84643f389d388cd9d2852"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ba158cb7a512398a6a965ae34c0874c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiron_1_1SharedMemory.html#a4ba158cb7a512398a6a965ae34c0874c">Lock</a> ()</td></tr>
<tr class="memdesc:a4ba158cb7a512398a6a965ae34c0874c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Manually lock the shared memory segment.  <a href="#a4ba158cb7a512398a6a965ae34c0874c">More...</a><br /></td></tr>
<tr class="separator:a4ba158cb7a512398a6a965ae34c0874c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc6bf7436207fc74e31b5c378ad0b9d1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiron_1_1SharedMemory.html#afc6bf7436207fc74e31b5c378ad0b9d1">Unlock</a> ()</td></tr>
<tr class="memdesc:afc6bf7436207fc74e31b5c378ad0b9d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Manually unlock the shared memory segment.  <a href="#afc6bf7436207fc74e31b5c378ad0b9d1">More...</a><br /></td></tr>
<tr class="separator:afc6bf7436207fc74e31b5c378ad0b9d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aefd4f38883617d33554ae7de9aa3db01"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiron_1_1SharedMemory.html#aefd4f38883617d33554ae7de9aa3db01">Destroy</a> ()</td></tr>
<tr class="memdesc:aefd4f38883617d33554ae7de9aa3db01"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroy the shared memory segment.  <a href="#aefd4f38883617d33554ae7de9aa3db01">More...</a><br /></td></tr>
<tr class="separator:aefd4f38883617d33554ae7de9aa3db01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3256243d4aa36570b83b270d0cbf100"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiron_1_1SharedMemory.html#ad3256243d4aa36570b83b270d0cbf100">Detach</a> ()</td></tr>
<tr class="memdesc:ad3256243d4aa36570b83b270d0cbf100"><td class="mdescLeft">&#160;</td><td class="mdescRight">Detach from the shared memory segment.  <a href="#ad3256243d4aa36570b83b270d0cbf100">More...</a><br /></td></tr>
<tr class="separator:ad3256243d4aa36570b83b270d0cbf100"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afed6e0ae2efbb4f9c1560e20cd1d3931"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiron_1_1SharedMemory.html#afed6e0ae2efbb4f9c1560e20cd1d3931">IsInitialized</a> () const </td></tr>
<tr class="memdesc:afed6e0ae2efbb4f9c1560e20cd1d3931"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if this instance has been initialized.  <a href="#afed6e0ae2efbb4f9c1560e20cd1d3931">More...</a><br /></td></tr>
<tr class="separator:afed6e0ae2efbb4f9c1560e20cd1d3931"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classiron_1_1SharedMemoryIF"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classiron_1_1SharedMemoryIF')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classiron_1_1SharedMemoryIF.html">iron::SharedMemoryIF</a></td></tr>
<tr class="memitem:a91fac06cecee3c0deec2992ec4f396d8 inherit pub_methods_classiron_1_1SharedMemoryIF"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a91fac06cecee3c0deec2992ec4f396d8"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiron_1_1SharedMemoryIF.html#a91fac06cecee3c0deec2992ec4f396d8">SharedMemoryIF</a> ()</td></tr>
<tr class="memdesc:a91fac06cecee3c0deec2992ec4f396d8 inherit pub_methods_classiron_1_1SharedMemoryIF"><td class="mdescLeft">&#160;</td><td class="mdescRight">The default constructor. <br /></td></tr>
<tr class="separator:a91fac06cecee3c0deec2992ec4f396d8 inherit pub_methods_classiron_1_1SharedMemoryIF"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf0c0973fb2424bc4b1cad542ea11f47 inherit pub_methods_classiron_1_1SharedMemoryIF"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="adf0c0973fb2424bc4b1cad542ea11f47"></a>
virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiron_1_1SharedMemoryIF.html#adf0c0973fb2424bc4b1cad542ea11f47">~SharedMemoryIF</a> ()</td></tr>
<tr class="memdesc:adf0c0973fb2424bc4b1cad542ea11f47 inherit pub_methods_classiron_1_1SharedMemoryIF"><td class="mdescLeft">&#160;</td><td class="mdescRight">The destructor. <br /></td></tr>
<tr class="separator:adf0c0973fb2424bc4b1cad542ea11f47 inherit pub_methods_classiron_1_1SharedMemoryIF"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A class for inter-process shared memory. </p>
<p>One process is responsible for creating the shared memory segment using the <a class="el" href="classiron_1_1SharedMemory.html#aa0f7c967737b106707b4c281d6a67f75" title="Create the shared memory segment. ">Create()</a> method. All other processes that need to access the shared memory segment call <a class="el" href="classiron_1_1SharedMemory.html#a1326a7c31d5216a887ad96d89634e538" title="Access the shared memory segment. ">Attach()</a> after the shared memory has been created.</p>
<p>The <a class="el" href="classiron_1_1SharedMemory.html#a9e115f469391a7292f56fbfef464fa71" title="Copy data into the shared memory segment. ">CopyToShm()</a> and <a class="el" href="classiron_1_1SharedMemory.html#ab5cc6e43a3cd831148a7387876e6233f" title="Copy data out of the shared memory segment. ">CopyFromShm()</a> methods are used to copy data into and out of the shared memory segment, handling the necessary locking and unlocking.</p>
<p>If the shared memory needs to be accessed manually, then the <a class="el" href="classiron_1_1SharedMemory.html#a82e917b65dd84643f389d388cd9d2852" title="Retrieve a pointer into the shared memory segment. ">GetShmPtr()</a>, <a class="el" href="classiron_1_1SharedMemory.html#a4ba158cb7a512398a6a965ae34c0874c" title="Manually lock the shared memory segment. ">Lock()</a>, and <a class="el" href="classiron_1_1SharedMemory.html#afc6bf7436207fc74e31b5c378ad0b9d1" title="Manually unlock the shared memory segment. ">Unlock()</a> methods may be used. It is up to the callers of these methods to use them correctly.</p>
<p>During shutdown, the process that created the shared memory segment must call <a class="el" href="classiron_1_1SharedMemory.html#aefd4f38883617d33554ae7de9aa3db01" title="Destroy the shared memory segment. ">Destroy()</a>, and the other processes that are accessing the shared memory segment must call <a class="el" href="classiron_1_1SharedMemory.html#ad3256243d4aa36570b83b270d0cbf100" title="Detach from the shared memory segment. ">Detach()</a>.</p>
<p>Implemented using UNIX shared memory (POSIX API) and semaphores (System V API) for locks. The System V API is used for semaphores to allow the kernel to unlock any locked semaphores if a process crashes. </p>

<p>Definition at line <a class="el" href="shared__memory_8h_source.html#l00093">93</a> of file <a class="el" href="shared__memory_8h_source.html">shared_memory.h</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a1326a7c31d5216a887ad96d89634e538"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool SharedMemory::Attach </td>
          <td>(</td>
          <td class="paramtype">key_t&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size_bytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Access the shared memory segment. </p>
<p>This method does not create the shared memory segment, it only accesses it after it has been created by one process calling <a class="el" href="classiron_1_1SharedMemory.html#aa0f7c967737b106707b4c281d6a67f75" title="Create the shared memory segment. ">Create()</a>. It may fail until the process creating the shared memory segment has completed calling <a class="el" href="classiron_1_1SharedMemory.html#aa0f7c967737b106707b4c281d6a67f75" title="Create the shared memory segment. ">Create()</a>.</p>
<p>This method does not block.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">key</td><td>The key for identifying the semaphore used for locking and unlocking the shared memory. </td></tr>
    <tr><td class="paramname">name</td><td>The shared memory name. Must be of the form "/name", with a leading "/" character followed by a unique name. </td></tr>
    <tr><td class="paramname">size_bytes</td><td>The size of the shared memory segment in bytes.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True on success, or false on error. If this method has already been called, then false is returned. </dd></dl>

<p>Implements <a class="el" href="classiron_1_1SharedMemoryIF.html#a121f9c78a2501a3dacf0822094b069f2">iron::SharedMemoryIF</a>.</p>

<p>Definition at line <a class="el" href="shared__memory_8cc_source.html#l00223">223</a> of file <a class="el" href="shared__memory_8cc_source.html">shared_memory.cc</a>.</p>

</div>
</div>
<a class="anchor" id="ab5cc6e43a3cd831148a7387876e6233f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool SharedMemory::CopyFromShm </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>dst_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size_bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>shm_offset_bytes</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Copy data out of the shared memory segment. </p>
<p>This method handles the necessary locking and unlocking of the shared memory segment for the caller. This call may block until the shared memory can be accessed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dst_buf</td><td>The destination location where the data will be copied from shared memory. </td></tr>
    <tr><td class="paramname">size_bytes</td><td>The size of the copy, in bytes. </td></tr>
    <tr><td class="paramname">shm_offset_bytes</td><td>The optional shared memory offset where the data will be copied from, in bytes. Defaults to 0.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True on success, or false on error. </dd></dl>

<p>Implements <a class="el" href="classiron_1_1SharedMemoryIF.html#a04af8bdf6ae3316bd804838d9a88f02d">iron::SharedMemoryIF</a>.</p>

<p>Definition at line <a class="el" href="shared__memory_8cc_source.html#l00343">343</a> of file <a class="el" href="shared__memory_8cc_source.html">shared_memory.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a9e115f469391a7292f56fbfef464fa71"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool SharedMemory::CopyToShm </td>
          <td>(</td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>src_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size_bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>shm_offset_bytes</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Copy data into the shared memory segment. </p>
<p>This method handles the necessary locking and unlocking of the shared memory segment for the caller. This call may block until the shared memory can be accessed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">src_buf</td><td>The location of the source data to be copied into shared memory. </td></tr>
    <tr><td class="paramname">size_bytes</td><td>The size of the copy, in bytes. </td></tr>
    <tr><td class="paramname">shm_offset_bytes</td><td>The optional shared memory offset where the data will be copied to, in bytes. Defaults to 0.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True on success, or false on error. </dd></dl>

<p>Implements <a class="el" href="classiron_1_1SharedMemoryIF.html#a67f649041164f06eb2f6c2e424c1f007">iron::SharedMemoryIF</a>.</p>

<p>Definition at line <a class="el" href="shared__memory_8cc_source.html#l00297">297</a> of file <a class="el" href="shared__memory_8cc_source.html">shared_memory.cc</a>.</p>

</div>
</div>
<a class="anchor" id="aa0f7c967737b106707b4c281d6a67f75"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool SharedMemory::Create </td>
          <td>(</td>
          <td class="paramtype">key_t&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size_bytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create the shared memory segment. </p>
<p>Only the process that is responsible for actually creating the common shared memory segment must call this method. It creates the shared memory segment and allows the calling process to access it (the process does not need to call <a class="el" href="classiron_1_1SharedMemory.html#a1326a7c31d5216a887ad96d89634e538" title="Access the shared memory segment. ">Attach()</a>).</p>
<p>This method does not block.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">key</td><td>The key for identifying the semaphore used for locking and unlocking the shared memory. </td></tr>
    <tr><td class="paramname">name</td><td>The shared memory name. Must be of the form "/name", with a leading "/" character followed by a unique name. </td></tr>
    <tr><td class="paramname">size_bytes</td><td>The size of the shared memory segment in bytes.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True on success, or false on error. If this method has already been called, then false is returned. </dd></dl>

<p>Implements <a class="el" href="classiron_1_1SharedMemoryIF.html#a88834ac14aa16f1a9378a25442954733">iron::SharedMemoryIF</a>.</p>

<p>Definition at line <a class="el" href="shared__memory_8cc_source.html#l00111">111</a> of file <a class="el" href="shared__memory_8cc_source.html">shared_memory.cc</a>.</p>

</div>
</div>
<a class="anchor" id="aefd4f38883617d33554ae7de9aa3db01"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SharedMemory::Destroy </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destroy the shared memory segment. </p>
<p>Only called by the process that created the shared memory segment via the <a class="el" href="classiron_1_1SharedMemory.html#aa0f7c967737b106707b4c281d6a67f75" title="Create the shared memory segment. ">Create()</a> method. </p>

<p>Implements <a class="el" href="classiron_1_1SharedMemoryIF.html#a1abb75b3775319b8d5a57e1f8880d427">iron::SharedMemoryIF</a>.</p>

<p>Definition at line <a class="el" href="shared__memory_8cc_source.html#l00439">439</a> of file <a class="el" href="shared__memory_8cc_source.html">shared_memory.cc</a>.</p>

</div>
</div>
<a class="anchor" id="ad3256243d4aa36570b83b270d0cbf100"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SharedMemory::Detach </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Detach from the shared memory segment. </p>
<p>Only called by the processes that attached to the shared memory segment via the <a class="el" href="classiron_1_1SharedMemory.html#a1326a7c31d5216a887ad96d89634e538" title="Access the shared memory segment. ">Attach()</a> method. </p>

<p>Implements <a class="el" href="classiron_1_1SharedMemoryIF.html#ab78fb1fe05234f4a04b0a297d44509b8">iron::SharedMemoryIF</a>.</p>

<p>Definition at line <a class="el" href="shared__memory_8cc_source.html#l00481">481</a> of file <a class="el" href="shared__memory_8cc_source.html">shared_memory.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a82e917b65dd84643f389d388cd9d2852"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t * SharedMemory::GetShmPtr </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>shm_offset_bytes</em> = <code>0</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieve a pointer into the shared memory segment. </p>
<p>This method does not handle any locking or unlocking. It is the callers responsiblity to access the shared memory at the appropriate time. This call does not block.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">shm_offset_bytes</td><td>The optional shared memory offset, in bytes. Defaults to 0.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The pointer into shared memory on success, or NULL on error. </dd></dl>

<p>Implements <a class="el" href="classiron_1_1SharedMemoryIF.html#a4992f37f1a62e03e1730572603ee0f83">iron::SharedMemoryIF</a>.</p>

<p>Definition at line <a class="el" href="shared__memory_8cc_source.html#l00389">389</a> of file <a class="el" href="shared__memory_8cc_source.html">shared_memory.cc</a>.</p>

</div>
</div>
<a class="anchor" id="afed6e0ae2efbb4f9c1560e20cd1d3931"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool iron::SharedMemory::IsInitialized </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if this instance has been initialized. </p>
<dl class="section return"><dt>Returns</dt><dd>True if <a class="el" href="classiron_1_1SharedMemory.html#aa0f7c967737b106707b4c281d6a67f75" title="Create the shared memory segment. ">Create()</a> or <a class="el" href="classiron_1_1SharedMemory.html#a1326a7c31d5216a887ad96d89634e538" title="Access the shared memory segment. ">Attach()</a> have been executed successfully, otherwise false. </dd></dl>

<p>Implements <a class="el" href="classiron_1_1SharedMemoryIF.html#abc22051047f6e485ef20b6359e8e5c98">iron::SharedMemoryIF</a>.</p>

<p>Definition at line <a class="el" href="shared__memory_8h_source.html#l00231">231</a> of file <a class="el" href="shared__memory_8h_source.html">shared_memory.h</a>.</p>

</div>
</div>
<a class="anchor" id="a4ba158cb7a512398a6a965ae34c0874c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool SharedMemory::Lock </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Manually lock the shared memory segment. </p>
<p>This call may block until the lock can be acquired. If the lock has already been acquired by the process, then this call will block forever.</p>
<dl class="section return"><dt>Returns</dt><dd>True on success, or false on error. </dd></dl>

<p>Implements <a class="el" href="classiron_1_1SharedMemoryIF.html#a6c641922ad40fecc2fb1b4c5d0428273">iron::SharedMemoryIF</a>.</p>

<p>Definition at line <a class="el" href="shared__memory_8cc_source.html#l00400">400</a> of file <a class="el" href="shared__memory_8cc_source.html">shared_memory.cc</a>.</p>

</div>
</div>
<a class="anchor" id="afc6bf7436207fc74e31b5c378ad0b9d1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool SharedMemory::Unlock </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Manually unlock the shared memory segment. </p>
<p>This call does not block.</p>
<dl class="section return"><dt>Returns</dt><dd>True on success, or false on error. If not currently locked, then false is returned. </dd></dl>

<p>Implements <a class="el" href="classiron_1_1SharedMemoryIF.html#a8d09ed7b64d71210ab15238475b368c0">iron::SharedMemoryIF</a>.</p>

<p>Definition at line <a class="el" href="shared__memory_8cc_source.html#l00421">421</a> of file <a class="el" href="shared__memory_8cc_source.html">shared_memory.cc</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/szabele/github/IRON/iron/common/include/<a class="el" href="shared__memory_8h_source.html">shared_memory.h</a></li>
<li>/home/szabele/github/IRON/iron/common/src/<a class="el" href="shared__memory_8cc_source.html">shared_memory.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceiron.html">iron</a></li><li class="navelem"><a class="el" href="classiron_1_1SharedMemory.html">SharedMemory</a></li>
    <li class="footer">Generated on Fri Feb 26 2021 11:31:59 for IRON by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
